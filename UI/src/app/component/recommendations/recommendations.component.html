<div class="container-recommendations">
    <div class="img-container" (click)="handleClick()">
        <img src="../../../assets/img/ico-recommendations.svg" alt="Recommendations" />
        <p class="text-recommendations">Recommendations</p>
    </div>
</div>
<p-dialog [(visible)]="displayModal" [modal]="true" [draggable]="true" [resizable]="true">
    <p-header>
        <div>
            Recommendations for Optimising KPI's
        </div>
    </p-header>
    <div class="dialog-body p-mb-4">
        <p-tabView>
            <p-tabPanel *ngFor="let tab of tabs" [header]="tab">
                <p-table #dt1 [value]="tabsContent[tab]" dataKey="kpiId" [tableStyle]="{ 'min-width': '50rem' }"
                [globalFilterFields]="['kpiName', 'maturity']">
                    <ng-template pTemplate="header">
                        <tr class="table-heading">
                            <th id="kpiName">KPI Name</th>
                            <th id="maturity">Maturity Level</th>
                            <th id="recommendation">Recommendation</th>
                            <th id="details">Details</th>
                        </tr>
                        <tr>
                            <th>
                                <input pInputText [id]="kpiName" type="text"
                                (input)="dt1.filter($event.target.value, 'kpiName', 'contains')" class="p-column-filter"
                                [style]="{'width':'100%'}" placeholder="Search" />
                                <label [for]="'kpiName'"></label>
                            </th>
                            <th>
                                <p-columnFilter field="maturity" matchMode="in" [showMenu]="false">
                                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                        <p-multiSelect [ngModel]="value" [options]="maturities" placeholder="Select maturity"
                                        [showClear]="true">
                                            <ng-template let-option pTemplate="item">
                                                <div class="inline-block vertical-align-middle">
                                                    <span class="ml-1 mt-1">{{ option }}</span>
                                                </div>
                                            </ng-template>
                                        </p-multiSelect>
                                    </ng-template>
                                </p-columnFilter>
                            </th>
                            <th>
                                
                            </th>
                            <th>
                                
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item>
                        <tr>
                            <td>{{ item.kpiName }}</td>
                            <td [ngClass]="{'m1': item.maturity == 1, 'm2': item.maturity == 2, 'm3': item.maturity == 3, 'm4': item.maturity == 4, 'm5': item.maturity == 5}">
                                <span class="maturity-level"><span class="maturity-indicator"></span>{{ "M"+item.maturity }}</span>
                            </td>
                            <td>{{ item.recommendationSummary }}</td>
                            <td>{{ item.recommendationDetails }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-tabPanel>
        </p-tabView>
    </div>

</p-dialog>